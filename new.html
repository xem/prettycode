<input oninput=h=n="\n";for(i=99;m=--i;m?h+=v:0)v=value.replace(RegExp(".{"+i+"}(?=(\\W=|.\\B.|..$)?).|.*","g"),function(v,l){m&=!l;return(v+n)});p.textContent=h><pre id=p>